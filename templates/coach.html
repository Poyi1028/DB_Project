<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Title</title>
    </head>

    <script type="text/javascript">

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function searchCoach(element){
            branch = document.getElementById("branch").value;
            expertise = document.getElementById("expertise").value;


            const urlParams = new URLSearchParams(window.location.search);

            urlParams.set('branch', branch);

            urlParams.set('expertise', expertise)
            
            window.location.search = urlParams;

        }

        window.onload = function() {
            const branch = getParameterByName('branch');
            const expertise = getParameterByName('expertise');

            document.getElementById('branch').value = branch? branch : "新店";
            document.getElementById('expertise').value = expertise? expertise : "胸"
        };

    </script>

    <body>
        <h1>Coach</h1>

        <a href="/">Back</a>

        <div>
            <table>
                <tr>
                    <th>Branch</th>
                    <th>Expertise</th>
                </tr>
                <tr>
                    <td>
                        <select id="branch" onchange="searchCoach(this)">
                            <option value="新店">新店</option>
                            <option value="文山">文山</option>
                            <?branchOptions?>
                        </select>
                    </td>
                    <td>
                        <select id="expertise" onchange="searchCoach(this)">
                            <?expertiseOptions?>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </body>
</html>
